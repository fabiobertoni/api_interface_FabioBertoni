<!DOCTYPE HTML>
<html lang="pt-br">
    <head>
		
		<meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Cadastro de Usuário</title>

    </head>

    <body>         
        <header> 
            <h1>Sistema Thrall </h1>
        </header> 
        
        <div>

            <scpan id="message"></scpan>

        </div>
        
        <section>
            
            <h2> Cadastro de Usuário</h2>
            <script src="assets/jquery-3.6.js"></script>
            
            <script>
                $(function(){   

                    $("#submitForm").click(function(childs){
                        
                        var name = $("#iUsuario").val();
                        var pass = $("#iSenha").val();
                        var permission = $("#iPermissao").val();

                         if (name === "" || pass === "" || permission === "") {
                            alert("Preencha todos os campos do formulario.")
                            return
                        }
           
                        var data = {
                            name: name,
                            pass: pass,
                            permission: permission
                        }  

                        var request = $.ajax({
                            url: "http://localhost/api-php-basic-main/app/routes/users/save.php",
                            method: "POST",
                            data: JSON.stringify(data),
                            dataType: "json"
                        });
                
                        request.done(function (response) {
                            console.log(response)
                            //alert("Cadastro efetuado");
                        });
                
                        request.fail(function( jqXHR, textStatus ) {
                            alert( "Erro ao cadastrar: " + textStatus );
                        }); 
                    }); 
                });

            </script>

            <form name="cad-user">

                    <p>
                        <label for="iUsuario">Usuário:</label>
                        <input type="text" id="iUsuario" name="nUsuario">
                    </p>
                    
                    <p>
                        <label for="iSenha">Senha:</label>
                        <input type="password" id="nSenha" name="nSenha">
                    </p>                    
                
                    <p>
                        <label for="iPermissao">Permissão:</label>
                        <select id="iPermissao" name="nPermissao">
                            <option value="">Selecione</option>
                            <option value="0">Administrador</option>
                            <option value="1">Comum</option>
                        </select>
                    
                    </p>            

                    <button type="submit" id="submitForm">Enviar</button>
                    <button type="reset">Limpar</button>
                
            </form>
                

        </section> 
        
        <section>

            <h2> Visualização de Usuário</h2>
            <table border="1" style="border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Usuario</th>
                            <th>Permissão</th>
                            <th>Deletar</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>Jean Mock</td>
                            <td>Permissão Mock</td>
                            <td><a>X</a></td>

                        </tr>
                    </tbody>


            </table>            

        </section>

    </body>

</html>